{{/* Example usage:
  <form
    id="main-form"
    method="post"
    novalidate
    data-restore-form="false"
    data-controller="turbo-form"
    data-action="submit->turbo-form#submitForm"
  >
    {{ template "authflowv2/__image_input.html"
      (dict
        "FormName"     "main-form"
        "SubmitEvent"  "authgear.button.enter_face_image"
        "IsRetry"      $has_unknown_err
      )
    }}
  </form>
 */}}

{{ define "authflowv2/__image_input.html" }}
<div
  class="flex flex-col gap-4"
  data-controller="image-input"
  data-image-input-toast1-msg-value="{{ include "v2.component.image-input.default.toast-1-msg" nil }}"
  data-image-input-toast2-msg-value="{{ include "v2.component.image-input.default.toast-2-msg" nil }}"
  data-image-input-toast3-msg-value="{{ include "v2.component.image-input.default.toast-3-msg" nil }}"
  data-image-input-toast4-msg-value="{{ include "v2.component.image-input.default.toast-4-msg" nil }}"
>
  <noscript>
    {{ $noscript_alert_msg := (include "v2.component.image-input.default.noscript" nil) }}
    {{ template "authflowv2/__alert_message.html"
      (dict
        "Type" "error"
        "Classname" "mt-4"
        "Message" $noscript_alert_msg
      )
    }}
  </noscript>
  <div data-image-input-target="cameraContainer" class="camera-container">
    <div data-image-input-target="cameraInitial" class="camera-initial">
      <div class="camera-initial-content">
        <div>
          <span class="material-icons secondary-btn__icon">person</span>
          <span>{{ include "v2.component.image-input.default.idle-description-avoid-smile" nil }}</span>
        </div>
        <div>
          <span class="material-icons secondary-btn__icon">no_photography</span>
          <span>{{ include "v2.component.image-input.default.idle-description-not-profile-pic" nil }}</span>
        </div>
        <div>
          <span class="material-icons secondary-btn__icon">security</span>
          <span>{{ include "v2.component.image-input.default.idle-description-secure-photo" nil }}</span>
        </div>  
      </div>
    </div>
    <video data-image-input-target="cameraVideo" class="camera-video hidden">Video stream not available.</video>
    <img data-image-input-target="cameraOutput" class="camera-output hidden" alt="The image capture will appear in this box." />
  </div>
  <canvas data-image-input-target="canvas" class="hidden"></canvas>
  <input 
    class="hidden"
    form="{{ $.FormName }}"
    type="text"
    name="x_b64_image"
    required
    data-image-input-target="input"
  />
  <button
    class="primary-btn w-full"
    type="button"
    name="{{ or $.OpenCameraButtonName "x_action" }}"
    value="{{ or $.OpenCameraButtonValue "button" }}"
    data-action="image-input#openCamera"
    data-image-input-target="openCameraBtn"
  >  
    {{ if $.IsRetry }}
      {{ include "v2.component.image-input.default.btn-label-try-again" nil }}
    {{ else }}
      {{ include "v2.component.image-input.default.btn-label-open-camera" nil }}
    {{ end }}
  </button>
  <button
    class="primary-btn w-full hidden"
    type="button"
    data-action="image-input#takePhoto"
    data-image-input-target="takePhotoBtn"
  > 
    {{ include "v2.component.image-input.default.btn-label-take-photo" nil }}
  </button>
  <button
    class="primary-btn w-full hidden"
    type="button"
    data-action="image-input#submitPhoto"
    data-image-input-target="submitPhotoBtn"
  > 
    {{ include "v2.component.image-input.default.btn-label-submit-photo" nil }}
  </button>

  <button
    class="hidden"
    type="submit"
    name="x_action"
    value="submit"
    data-authgear-event="authgear.button.enter_face_image"
    data-image-input-target="formSubmitBtn"
    tabindex="-1"
  ></button>
</div>
{{ end }}
