#!/bin/bash

export TRUST_PROXY='true'
export AUTHGEAR_APP_ID=accounts
export AUTHGEAR_CLIENT_ID=portal
export AUTHGEAR_ENDPOINT="$AUTHGEAR_HTTP_ORIGIN_ACCOUNTS"
export AUTHGEAR_WEB_SDK_SESSION_TYPE=refresh_token

export DATABASE_SCHEMA=public
export DATABASE_URL="postgres://authgear:$POSTGRES_PASSWORD@localhost:5432/authgear?sslmode=disable"

export AUDIT_DATABASE_SCHEMA="$DATABASE_SCHEMA"
export AUDIT_DATABASE_URL="$DATABASE_URL"

export SEARCH_DATABASE_SCHEMA="$DATABASE_SCHEMA"
export SEARCH_DATABASE_URL="$DATABASE_URL"

export DENO_ENDPOINT='http://localhost:8090'

export IMAGES_OBJECT_STORE_TYPE=MINIO
export IMAGES_OBJECT_STORE_MINIO_ENDPOINT='http://localhost:9000'
export IMAGES_OBJECT_STORE_MINIO_BUCKET_NAME=images
export IMAGES_OBJECT_STORE_MINIO_ACCESS_KEY_ID="$MINIO_ROOT_USER"
export IMAGES_OBJECT_STORE_MINIO_SECRET_ACCESS_KEY="$MINIO_ROOT_PASSWORD"

export USEREXPORT_OBJECT_STORE_TYPE=MINIO
export USEREXPORT_OBJECT_STORE_MINIO_ENDPOINT='http://localhost:9000'
export USEREXPORT_OBJECT_STORE_MINIO_BUCKET_NAME=userexport
export USEREXPORT_OBJECT_STORE_MINIO_ACCESS_KEY_ID="$MINIO_ROOT_USER"
export USEREXPORT_OBJECT_STORE_MINIO_SECRET_ACCESS_KEY="$MINIO_ROOT_PASSWORD"

export REDIS_URL="redis://default:$REDIS_PASSWORD@localhost:6379/0"

export ANALYTIC_REDIS_URL="redis://default:$REDIS_PASSWORD@localhost:6379/1"

export CONFIG_SOURCE_TYPE=database
export APP_CUSTOM_RESOURCE_DIRECTORY=/home/authgear/authgear_deployment_runtime
export CUSTOM_RESOURCE_DIRECTORY=/home/authgear/authgear_deployment_runtime

# Entries were added /etc/hosts to resolve these host.
export ADMIN_API_HOST_TEMPLATE='{{ .AppID }}.projects.authgear'
export APP_HOST_SUFFIXES='.projects.authgear'
export APP_HOST_SUFFIX='.projects.authgear'

export AUTH_UI_WINDOW_MESSAGE_ALLOWED_ORIGINS="$AUTHGEAR_HTTP_ORIGIN_PORTAL"
export ALLOWED_FRAME_ANCESTORS="$AUTHGEAR_HTTP_ORIGIN_PORTAL"
export SEARCH_ENABLED='true'
export AUDIT_LOG_ENABLED='true'
export ANALYTIC_ENABLED='true'
export PORTAL_FEATURES_SHOW_CUSTOM_SMS_GATEWAY='true'
